<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Cache-Control"
      content="no-store, no-cache, must-revalidate"
    />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <title>–ê–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¢–µ—Ä–µ–º–∫–∏, –ì–æ–ª–æ—Å—ñ—î–≤–æ ‚Äì –£—Ä–æ–∫–∏ –≤–æ–¥—ñ–Ω–Ω—è –ê–ö–ü–ü</title>
    <meta
      name="description"
      content="–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω—ñ —É—Ä–æ–∫–∏ –≤–æ–¥—ñ–Ω–Ω—è –∑ –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º —É –ö–∏—î–≤—ñ (–¢–µ—Ä–µ–º–∫–∏, –ì–æ–ª–æ—Å—ñ—î–≤–æ, –í–î–ù–ì). –ê–ö–ü–ü, –≥–Ω—É—á–∫–∏–π –≥—Ä–∞—Ñ—ñ–∫, –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–æ —ñ—Å–ø–∏—Ç—É. –ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –æ–Ω–ª–∞–π–Ω."
    />
    <link rel="stylesheet" href="css/styles.css?v=2.2" />
    <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
  </head>

  <body>
    <header>
      <img
        src="img/holydrivers_logo.png"
        alt="–õ–æ–≥–æ—Ç–∏–ø HolyDrivers"
        class="logo"
      />
      <h1>
        –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä <br /><span style="font-size: 0.6em"
          >–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∫–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á</span
        >
      </h1>
      <div class="home">
        <a href="/">
          <img
            src="img/home.png"
            alt="–ù–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–∏–≤–∞—Ç–Ω–∏–π –∞–≤—Ç–æ—ñ–Ω—Å—Ä—É–∫—Ç–æ—Ä —Ç–µ—Ä–µ–º–∫–∏"
          />
          <span>–ù–∞ –≥–æ–ª–æ–≤–Ω—É</span>
        </a>
      </div>
    </header>

    <section id="userBar" class="section" style="display: none">
      <span id="userLabel"></span>
      <button id="logoutBtn" type="button">–í–∏–π—Ç–∏</button>
      <div class="progress-ring" id="user_hours" style="--total: 0; --max: 0">
        <div class="progress-ring__inner">
          <div class="progress-ring__value" id="user_hours_value">0</div>
          <div class="progress-ring-static">–≥–æ–¥–∏–Ω</div>
        </div>
      </div>
    </section>

    <section class="section" id="userCodeForm">
      <label for="userCodeInput"
        >–î–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –≤–∞—à–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞–Ω—è—Ç—å –≤–≤–µ–¥—ñ—Ç—å –∫–æ–¥
        –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, –Ω–∞–¥–∞–Ω–∏–π –≤–∞–º –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–∞–π—Ç—É (–∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º)</label
      >
      <div>
        <input
          id="userCodeInput"
          type="password"
          autocomplete="off"
          placeholder="–ö–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó"
        />
        <button id="userCodeBtn" type="button">–û–∫</button>
      </div>
      <div id="userCodeErr" style="display: none">–ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó</div>
    </section>
    <h3 id="for_new_user">
      <p>
        –û–±–∏—Ä—ñ—Ç—å –∑—Ä—É—á–Ω–∏–π –≤–∞–º –≤—ñ–ª—å–Ω–∏–π —Å–ª–æ—Ç, –ø–æ–≤—ñ–¥–æ–º—Ç–µ –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –ø—Ä–æ –±–∞–∂–∞–Ω–Ω—è
        –∑–∞–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ —Ü–µ–π —á–∞—Å.
      </p>
      <p>
        –î–æ—á–µ–∫–∞–π—Ç–µ—Å—å, –ø–æ–∫–∏ –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∞—à –∑–∞–ø–∏—Å —Ç–∞ –ø—Ä–∏—Ö–æ–¥—å—Ç–µ –Ω–∞
        –∑–∞–Ω—è—Ç—Ç—è —É –∑–∞–∑–Ω–∞—á–µ–Ω–∏–π –¥–µ–Ω—å —Ç–∞ —á–∞—Å. –ó–∞ –¥–µ–Ω—å –¥–æ –∑–∞–Ω—è—Ç—å –≤–∞–º –Ω–∞–¥—ñ–π–¥–µ SMS —ñ–∑
        –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è–º.
      </p>
      <div class="list">
        <p>&#128994; - —Å–ª–æ—Ç –≤—ñ–ª—å–Ω–∏–π</p>
        <p>&#9940; - —Å–ª–æ—Ç –∑–∞–π–Ω—è—Ç–∏–π (–ø—Ä–æ–≤–æ–¥—è—Ç—å—Å—è –∑–∞–Ω—è—Ç—Ç—è)</p>
        <p>&#9728;&#65039; - –Ω–µ—Ä–æ–±–æ—á—ñ –≥–æ–¥–∏–Ω–∏</p>
        <p>&#127891; - –ø—Ä–∞–∫—Ç–∏—á–Ω—ñ —ñ—Å–ø–∏—Ç–∏ –≤ —Å–µ—Ä–≤—ñ—Å–Ω–æ–º—É —Ü–µ–Ω—Ç—Ä—ñ –ú–í–°</p>
        <p>&#128736;&#65039; - —Ç–µ—Ö–Ω—ñ—á–Ω–µ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–æ–±—ñ–ª—è</p>
      </div>
      <p>
        –Ø–∫—â–æ –≤–∏ –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ –∑—Ä—É—á–Ω–∏—Ö –≤—ñ–ª—å–Ω–∏—Ö —Å–ª–æ—Ç—ñ–≤ ‚Äî –∑–≤'—è–∂—ñ—Ç—å—Å—è –∑
        –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º, –¥–ª—è –≤–∞—Å –±—É–¥–µ –≤–∏–¥—ñ–ª–µ–Ω–æ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π —á–∞—Å –∑–∞ —Ä–∞—Ö—É–Ω–æ–∫ –≥–æ–¥–∏–Ω,
        —â–æ –ø–æ–∑–Ω–∞—á–µ–Ω—ñ, —è–∫ –Ω–µ—Ä–æ–±–æ—á—ñ.
      </p>
    </h3>

    <div class="scheduleContainerPreloader" id="scheduleContainerPreloader">
      <div>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>
      <div>
        <img
          src="img/giphy.gif"
          alt="–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É –∑–∞–Ω—è—Ç—å –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞"
        />
      </div>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –¥–≤–æ—Ö –º—ñ—Å—è—á–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å -->
    <div id="scheduleContainer"></div>

    <footer id="contacts">
      <p>–ó–≤'—è–∑–∞—Ç–∏—Å—å –∑ –∞–≤—Ç–æ—ñ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–æ–º:</p>
      <div class="contacts">
        <a href="tel:+380632209770" title="–ü–æ–¥–∑–≤–æ–Ω–∏—Ç–∏" class="contacts-img">
          <img src="img/phone.png" alt="" />
          +38 063 2209770
        </a>

        <a
          href="viber://chat?number=%2B380632209770"
          title="–ù–∞–ø–∏—Å–∞—Ç–∏ —É Viber"
          class="contacts-img"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img src="img/viber.png" alt="" />
          Viber
        </a>
        <a
          href="https://fb.com/holydrivers"
          title="–ú–∏ –Ω–∞ facebook"
          class="contacts-img"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img src="img/fb.png" alt="–ú–∏ –Ω–∞ facebook" /> Facebook
        </a>
      </div>
    </footer>
  </body>
</html>

<script>
  const API_URL = "https://holydrivers.com.ua/api/proxy.php";
  const LS_KEY = "user";
  let lastUpdate = null; // –æ—Å—Ç–∞–Ω–Ω—ñ–π –≤—ñ–¥–æ–º–∏–π —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É

  async function checkForScheduleUpdate() {
    try {
      const url = new URL(API_URL);
      url.searchParams.set("mode", "getlastupdate");

      const res = await fetch(url.toString(), { cache: "no-store" });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);

      const data = await res.json(); // –æ—á—ñ–∫—É—î–º–æ: { lastUpdate: "2025-12-20 19:12:34" } –∞–±–æ null
      if (!data || !data.lastUpdate) {
        // –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω—é—î–º–æ, —è–∫—â–æ Apps Script —â–µ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–∞–ø–∏—Å–∞–≤
        return;
      }

      // —è–∫—â–æ –ø–µ—Ä—à–∏–π —Ä–∞–∑ ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∞–º'—è—Ç–∞–ª–∏ —ñ –Ω—ñ—á–æ–≥–æ –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ
      if (lastUpdate === null) {
        lastUpdate = data.lastUpdate;
        return;
      }

      // —è–∫—â–æ —á–∞—Å –∑–º—ñ–Ω–∏–≤—Å—è ‚Äî –æ–Ω–æ–≤–ª—é—î–º–æ —Ä–æ–∑–∫–ª–∞–¥
      if (data.lastUpdate !== lastUpdate) {
        console.log("Schedule updated at", data.lastUpdate);
        lastUpdate = data.lastUpdate;
        await loadSchedules(); // –ø–µ—Ä–µ—Ç—è–≥—É—î–º–æ –Ω–æ–≤—ñ –¥–∞–Ω—ñ –π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—É—î–º–æ —Ç–∞–±–ª–∏—Ü—é
      }
    } catch (err) {
      console.error("–ù–µ –≤–¥–∞–ª–æ—Å—è –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–æ–∑–∫–ª–∞–¥—É:", err);
    }
  }

  function updateUserBar(fullname, id, totalHours, maxHours) {
    const bar = document.getElementById("userBar");
    const label = document.getElementById("userLabel");
    const error = document.getElementById("userCodeErr");
    const codeForm = document.getElementById("userCodeForm");
    const ring = document.getElementById("user_hours");
    const ringValue = document.getElementById("user_hours_value");
    const total = Number(totalHours) || 0;
    const max = Number(maxHours) || 0;

    if (fullname && String(fullname).trim() !== "") {
      console.log("ok");
      if (label) label.textContent = `–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: ${fullname}`;
      if (bar) bar.style.display = "";

      if (ring) {
        ring.style.display = "";
        ring.style.setProperty("--total", total);
        ring.style.setProperty("--max", max);
        if (ringValue) ringValue.textContent = String(total);
        // —è–∫—â–æ max == 0 / –ø–æ—Ä–æ–∂–Ω—î / –Ω–µ –∑–∞–¥–∞–Ω–æ => 100%
        if (ring) {
          if (!max) ring.style.display = "none";
          else ring.style.display = "flex";
        }
      }
      // document.getElementById("for_new_user").style.display = "none";
    } else {
      console.log("error");
      console.log(id);
      if (bar) bar.style.display = "none";
      if (id && String(id).trim() !== "") {
        if (error) error.style.display = "";
      } // —è–∫—â–æ user_id –ø–æ–≤–µ—Ä–Ω—É–≤—Å—è, –∞ user_fullname - –Ω—ñ, —Ç–æ –≤–≤–∞–∂–∞—î–º–æ, —â–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è –Ω–µ –ø—Ä–æ–π—à–ª–∞
      if (codeForm) codeForm.style.display = "";
      document.getElementById("for_new_user").style.display = "";
    }
  }

  function attachLogout() {
    const btn = document.getElementById("logoutBtn");
    if (!btn) return;
    btn.addEventListener("click", () => {
      try {
        localStorage.removeItem("user");
      } catch (_) {}
      // –ü—Ä–∏–±–µ—Ä–µ–º–æ ?user –∑ –∞–¥—Ä–µ—Å–Ω–æ–≥–æ —Ä—è–¥–∫–∞ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
      try {
        const url = new URL(location.href);
        url.searchParams.delete("user");
        history.replaceState({}, "", url.toString());
      } catch (_) {}
      updateUserBar("");
      // –Ø–∫—â–æ —É —Ç–µ–±–µ —î —Ñ–æ—Ä–º–∞ –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É ‚Äî –º–æ–∂–Ω–∞ —ó—ó –ø–æ–∫–∞–∑–∞—Ç–∏ —Ç—É—Ç
      const form = document.getElementById("userCodeForm");
      if (form) form.style.display = "";
      // –ü–µ—Ä–µ—á–∏—Ç–∞—Ç–∏ —Ä–æ–∑–∫–ª–∞–¥ –±–µ–∑ user
      loadSchedules();
    });
  }

  // –í–∏–∫–ª–∏—á–∏ attachLogout –æ–¥–∏–Ω —Ä–∞–∑ –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
  document.addEventListener("DOMContentLoaded", attachLogout);

  // –Ø–∫—â–æ –∫–æ–¥ –ø—Ä–∏–π—à–æ–≤ —É URL ‚Äî –ø—Ä–æ—Å—Ç–æ –∑–±–µ—Ä–µ–∂–µ–º–æ —è–∫ —î (–±–µ–∑ –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫)
  (function bootstrapUserFromURL() {
    const u = new URLSearchParams(location.search).get("user");
    if (u != null) {
      try {
        localStorage.setItem(LS_KEY, u);
      } catch (_) {}
    }
  })();

  function getUserId() {
    try {
      return localStorage.getItem(LS_KEY);
    } catch (_) {
      return null;
    }
  }

  function setUserId(u) {
    try {
      localStorage.setItem(LS_KEY, String(u));
      return true;
    } catch (_) {
      return false;
    }
  }

  function toggleUserForm(show) {
    const form = document.getElementById("userCodeForm");
    if (form) form.style.display = show ? "" : "none";
  }

  function initUserForm() {
    const input = document.getElementById("userCodeInput");
    const btn = document.getElementById("userCodeBtn");
    const err = document.getElementById("userCodeErr");

    function submit() {
      const val = input ? input.value : "";
      if (input) input.value = "";

      // err.textContent = "";
      if (setUserId(val)) {
        toggleUserForm(false);
        if (typeof loadSchedules === "function") loadSchedules(val);
      } else {
        // err.textContent = "–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ –∫–æ–¥ —É –±—Ä–∞—É–∑–µ—Ä—ñ.";
      }
    }

    if (btn) btn.addEventListener("click", submit);
    if (input)
      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") submit();
      });
  }

  document.addEventListener("DOMContentLoaded", () => {
    initUserForm();
    const u = getUserId();
    if (u !== null) {
      toggleUserForm(false);
      if (typeof loadSchedules === "function") loadSchedules(u);
    } else {
      toggleUserForm(true);
    }
  });

  // —Å—Ç–∞—Ä—Ç—É—î–º–æ –≤—ñ–¥–∫–ª–∞–¥–µ–Ω–æ, —â–æ–± –Ω–µ –≥—Ä—É–∑–∏—Ç–∏ –æ–¥—Ä–∞–∑—É
  setTimeout(() => {
    // –ø–µ—Ä—à–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
    checkForScheduleUpdate();
    // –¥–∞–ª—ñ ‚Äî —Ä–∞–∑ –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
    setInterval(checkForScheduleUpdate, 300000);
  }, 5000);

  // üîß –í–∫–∞–∂–∏ —Å–≤—ñ–π –ø—Ä–æ–∫—Å—ñ/–±–µ–∫–µ–Ω–¥, —è–∫–∏–π –ø–æ–≤–µ—Ä—Ç–∞—î { current, next }
  // –Ø–∫—â–æ –Ω–∞ VPS —î proxy.php, —è–∫–∏–π –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∫–∏–¥–∞—î –∑–∞–ø–∏—Ç –¥–æ Apps Script:
  // –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ª–∏—à–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ user (month –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

  function getCellClass(value) {
    if (value == null) return "";
    const v = value.toString().trim().toLowerCase();
    if (v === "&#127891;") return "exam";
    return "";
  }

  // –†–µ–Ω–¥–µ—Ä –æ–¥–Ω–æ–≥–æ –º—ñ—Å—è—Ü—è (–∞–±–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —è–∫—â–æ –¥–∞–Ω–∏—Ö –Ω–µ–º–∞—î)
  function renderMonthBlock(label, payload) {
    if (!payload) {
      return `
        <h3 class="section-title" style="margin-top:1rem;">${label}</h3>
        <div class="schedule">
          <div style="width:100%;text-align:center;color:#ccc;padding:8px 0;">
            –ó–∞–ø–∏—Å –Ω–∞ —Ü–µ–π –º—ñ—Å—è—Ü—å –Ω–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ
          </div>
        </div>
      `;
    }

    const getTitle = (value) => {
      // title –¥–ª—è —Å–ª–æ—Ç—ñ–≤
      const v = String(value).trim();

      switch (v) {
        case "&#128994;":
          return "–≤—ñ–ª—å–Ω–æ";
        case "&#127891;":
          return "—ñ—Å–ø–∏—Ç";
        case "&#9940;":
          return "–∑–∞–π–Ω—è—Ç–æ";
        case "&#9728;&#65039;":
          return "–≤–∏—Ö—ñ–¥–Ω–∏–π";
        case "&#128736;&#65039;":
          return "—Ç–µ—Ö–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è";
        default:
          return "";
      }
    };

    // –õ—ñ–≤–∞ –∫–æ–ª–æ–Ω–∫–∞
    const leftHtml = (payload.leftCol || [])
      .map((v) => {
        const value = v != null && v.toString().trim() !== "" ? v : "";
        return `<tr><td >${value}</td></tr>`;
      })
      .join("");

    // –ü—Ä–∞–≤–∞ —Ç–∞–±–ª–∏—Ü—è

    const rightHtml = (payload.rightCols || [])
      .map((row) => {
        const tds = row
          .map((cell) => {
            const value =
              cell != null && cell.toString().trim() !== "" ? cell : "";
            return `<td><span title=${getTitle(value)} class="${getCellClass(
              cell
            )}">${value}</span></td>`;
          })
          .join("");
        return `<tr>${tds}</tr>`;
      })
      .join("");

    return `
      <h3 class="section-title" style="margin-top:1rem;">${payload.month}</h3>
      <div class="schedule">
        <div class="left">
          <table><tbody>${leftHtml}</tbody></table>
        </div>
        <div class="right">
          <table><tbody>${rightHtml}</tbody></table>
        </div>
      </div>
    `;
  }

  // –û—Å–Ω–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: —Ç—è–≥–Ω–µ–º–æ JSON { current, next } —ñ —Ä–µ–Ω–¥–µ—Ä–∏–º–æ 2 —Ç–∞–±–ª–∏—Ü—ñ
  async function loadSchedules() {
    let user = "";
    try {
      const u = localStorage.getItem("user");
      if (u && u !== "null" && u !== "undefined" && u.trim() !== "") {
        user = u.trim();
      }
    } catch (_) {}

    const container = document.getElementById("scheduleContainer");
    const preloader = document.getElementById("scheduleContainerPreloader");
    if (preloader) preloader.style.display = "flex";

    try {
      const url = new URL(API_URL);
      if (user) url.searchParams.set("user", user);

      const res = await fetch(url.toString(), { cache: "no-store" });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json(); // –æ—á—ñ–∫—É—î–º–æ: { current: {...}|null, next: {...}|null }
      updateUserBar(
        data.user_fullname,
        data.user_id,
        data.total_hours,
        data.user_maxhours
      );
      console.log("res:", data);
      const html =
        renderMonthBlock("–ü–æ—Ç–æ—á–Ω–∏–π –º—ñ—Å—è—Ü—å", data.current) +
        renderMonthBlock("–ù–∞—Å—Ç—É–ø–Ω–∏–π –º—ñ—Å—è—Ü—å", data.next);

      container.innerHTML = html;
      if (preloader) preloader.style.display = "none";
    } catch (err) {
      container.innerHTML = `<div style="color:red;">–ü–æ–º–∏–ª–∫–∞: ${err.message}</div>`;
    }
  }

  // üöÄ –°—Ç–∞—Ä—Ç (–ø–µ—Ä–µ–¥–∞–π —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏)
  loadSchedules();
</script>
